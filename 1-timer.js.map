{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst dateInput = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('button[data-start]');\nstartBtn.disabled = true;\nlet userSelectedDate = null; //! select date in milliseconds\nlet saveInterval = null; //! interval time in milliseconds\n\nconst days = document.querySelector('span[data-days]');\nconst hours = document.querySelector('span[data-hours]');\nconst minutes = document.querySelector('span[data-minutes]');\nconst seconds = document.querySelector('span[data-seconds]');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    startActive(userSelectedDate);\n    console.log(selectedDates[0]);\n  },\n};\n\nflatpickr(dateInput, options);\n\ndateInput.addEventListener('input', saveValue);\n\nstartBtn.addEventListener('click', start);\n\nfunction saveValue() {\n  let a = flatpickr.parseDate(dateInput.value);\n  userSelectedDate = a.getTime();\n  intervalTime(userSelectedDate);\n}\n\nfunction startActive(a) {\n  if (a > Date.now()) {\n    startBtn.disabled = false;\n  } else {\n    startBtn.disabled = true;\n    iziToast.error({\n      color: 'red',\n      message: 'Please select a future date.',\n      position: 'topRight',\n      close: false,\n    });\n  }\n}\n\nfunction intervalTime(a) {\n  saveInterval = a - Date.now();\n} //! in a put select date in milliseconds, a = number; (userSelectedDate)\n\nfunction start() {\n  updateInterval();\n}\n\nfunction updateInterval() {\n  let intervalId = setInterval(() => {\n    saveInterval -= 1000;\n    showDateHtml(convertMs(saveInterval));\n    if (saveInterval > 0) {\n      startBtn.disabled = true;\n      dateInput.disabled = true;\n    } else {\n      clearInterval(intervalId);\n      startBtn.disabled = false;\n      dateInput.disabled = false;\n    }\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction showDateHtml(data) {\n  days.textContent = String(data.days).padStart(2, '0');\n  hours.textContent = String(data.hours).padStart(2, '0');\n  minutes.textContent = String(data.minutes).padStart(2, '0');\n  seconds.textContent = String(data.seconds).padStart(2, '0');\n}\n"],"names":["dateInput","startBtn","userSelectedDate","saveInterval","days","hours","minutes","seconds","options","selectedDates","startActive","flatpickr","saveValue","start","intervalTime","a","iziToast","updateInterval","intervalId","showDateHtml","convertMs","ms","data"],"mappings":"0IAMA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAW,SAAS,cAAc,oBAAoB,EAC5DA,EAAS,SAAW,GACpB,IAAIC,EAAmB,KAAK;AAC5B,IAAIC,EAAe,KAAK;AAExB,MAAMC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EAErDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAYR,CAAgB,EAC5B,QAAQ,IAAIO,EAAc,CAAC,CAAC,CAC7B,CACH,EAEAE,EAAUX,EAAWQ,CAAO,EAE5BR,EAAU,iBAAiB,QAASY,CAAS,EAE7CX,EAAS,iBAAiB,QAASY,CAAK,EAExC,SAASD,GAAY,CAEnBV,EADQS,EAAU,UAAUX,EAAU,KAAK,EACtB,UACrBc,EAAaZ,CAAgB,CAC/B,CAEA,SAASQ,EAAYK,EAAG,CAClBA,EAAI,KAAK,MACXd,EAAS,SAAW,IAEpBA,EAAS,SAAW,GACpBe,EAAS,MAAM,CACb,MAAO,MACP,QAAS,+BACT,SAAU,WACV,MAAO,EACb,CAAK,EAEL,CAEA,SAASF,EAAaC,EAAG,CACvBZ,EAAeY,EAAI,KAAK,KAC1B,CAAC;AAED,SAASF,GAAQ,CACfI,GACF,CAEA,SAASA,GAAiB,CACxB,IAAIC,EAAa,YAAY,IAAM,CACjCf,GAAgB,IAChBgB,EAAaC,EAAUjB,CAAY,CAAC,EAChCA,EAAe,GACjBF,EAAS,SAAW,GACpBD,EAAU,SAAW,KAErB,cAAckB,CAAU,EACxBjB,EAAS,SAAW,GACpBD,EAAU,SAAW,GAExB,EAAE,GAAI,CACT,CAEA,SAASoB,EAAUC,EAAI,CAQrB,MAAMjB,EAAO,KAAK,MAAMiB,EAAK,KAAG,EAE1BhB,EAAQ,KAAK,MAAOgB,EAAK,MAAO,IAAI,EAEpCf,EAAU,KAAK,MAAQe,EAAK,MAAO,KAAQ,GAAM,EAEjDd,EAAU,KAAK,MAASc,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAjB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASY,EAAaG,EAAM,CAC1BlB,EAAK,YAAc,OAAOkB,EAAK,IAAI,EAAE,SAAS,EAAG,GAAG,EACpDjB,EAAM,YAAc,OAAOiB,EAAK,KAAK,EAAE,SAAS,EAAG,GAAG,EACtDhB,EAAQ,YAAc,OAAOgB,EAAK,OAAO,EAAE,SAAS,EAAG,GAAG,EAC1Df,EAAQ,YAAc,OAAOe,EAAK,OAAO,EAAE,SAAS,EAAG,GAAG,CAC5D"}